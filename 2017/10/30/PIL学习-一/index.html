<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <link rel="canonical" href="www.peterpan980927.cn/2017/10/30/PIL学习-一/">
    
    
    <title>PIL学习(一) | Peterpan&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="CTF">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.0.7">
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":true,"app_id":"Ljd6bJFL9N4tWj6WnGcbYUd2-gzGzoHsz","app_key":"xDGMWtxNt0aReJDVkuYmSqBd","icon":true}'),
            v: JSON.parse('{"enable":true,"appid":"Ljd6bJFL9N4tWj6WnGcbYUd2-gzGzoHsz","appkey":"xDGMWtxNt0aReJDVkuYmSqBd","notify":false,"verify":false,"placeholder":"望不吝赐教","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
</head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/bg.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/miao_icon.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Peter pan</h5>
          <a href="mailto:15d31f644fafee19d219f5d6b9ac590f" title="15d31f644fafee19d219f5d6b9ac590f" class="mail">15d31f644fafee19d219f5d6b9ac590f</a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/Peterpan0927" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                HOME
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                TAGS
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                ARCHIVES
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                ABOUT
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/Peterpan0927" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>PIL学习(一)</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <div class="container fade-scale">
        <h1 class="title">PIL学习(一)</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-10-30T15:16:27.000Z" itemprop="datePublished" class="page-time">
  2017-10-30
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/图形处理-python脚本/">图形处理 python脚本</a></li></ul>

            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-PIL学习-一"
  class="post-article article-type-post fade" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">PIL学习(一)</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-10-30 23:16:27" datetime="2017-10-30T15:16:27.000Z"  itemprop="datePublished">2017-10-30</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/图形处理-python脚本/">图形处理 python脚本</a></li></ul>



            
	<span id="/2017/10/30/PIL学习-一/" class="leancloud_visitors" data-flag-title="PIL学习(一)" title="PIL学习(一)">
		
			<i class="icon icon-eye"></i>
		
		<span class="leancloud-visitors-count"></span>
	</span>
 

            
    <span>
        <i class="icon icon-comment-o"></i>
        <a href="/2017/10/30/PIL学习-一/#comment">
            <span class="valine-comment-count" data-xid="/2017/10/30/PIL学习-一/"></span>
        </a>
    </span>


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>突破script kid的境界了～离解锁脚本大师的成就又近一步</p>
<a id="more"></a>
<h2 id="0x00-前言pil介绍和安装"><a class="markdownIt-Anchor" href="#0x00-前言pil介绍和安装"></a> 0x00-前言&amp;PIL介绍和安装</h2>
<p>在对于隐写术的学习的同时我们也了解到了许多图像学的知识,虽然诸如<code>binwalk</code>、<code>stegsolve</code>、<code>stegdetect</code>这样的工具对我们的解题的帮助非常大，但是从博客中也不难看到，有很多题目是通过python的脚本去生成二维码或者提取图像的最低位，这个时候工具的帮助也是有限的，熟练的编写这样的脚本就成为了一个优秀的CTFer的基本素养。现在就让我们一起来进行PIL库的学习吧～</p>
<p>Pillow是Python里的图像处理库（PIL：Python Image Library），提供了了广泛的文件格式支持，强大的图像处理能力，主要包括图像储存、图像显示、格式转换以及基本的图像处理操作等。</p>
<p>虽然本篇介绍的是 PIL，但实际上安装的却是 Pillow。PIL 的更新速度很慢，而且存在一些难以配置的问题，不推荐使用；而 Pillow 库则是 PIL 的一个分支，维护和开发活跃，Pillow 兼容 PIL 的绝大多数语法，推荐使用。</p>
<p>在Mac上可以先使用Homebrew安装python3,然后再使用pip安装pillow模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip3 install Pillow</div></pre></td></tr></table></figure>
<p>安装好之后，打开 Python 解释器，输入 <code>from PIL import Image</code> 来测试是否安装成功。</p>
<p>⚠️注意：有一些教程默认是用import Image的，但是在window 的64位系统中如果没有在cmd中执行pip install PIL是找不到Image模块的，所以呢必须先安装Pillow，在cmd中运行pip install Pillow，这里也要变成from PIL import Image</p>
<hr>
<h2 id="0x01-image模块"><a class="markdownIt-Anchor" href="#0x01-image模块"></a> 0x01-Image模块</h2>
<p>Image可以说是PIL中最重要的一个模块了，它可以用作创建图片对象，并进行一些图像的基本操作。</p>
<h3 id="读取和存储操作"><a class="markdownIt-Anchor" href="#读取和存储操作"></a> 读取和存储操作</h3>
<ol>
<li>PIL的open()函数用于创建PIL对象，比如读取一张图片：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding:utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'test.jpg'</span>)</div></pre></td></tr></table></figure>
<ol start="2">
<li>存储图片</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding:utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'test.jpg'</span>)</div><div class="line"><span class="comment">#生成缩略图</span></div><div class="line">img.thumbnail((<span class="number">128</span>,<span class="number">128</span>))</div><div class="line"></div><div class="line"><span class="comment">#保存图片</span></div><div class="line">img.save(<span class="string">'test1.jpg'</span>, <span class="string">'JPEG'</span>)</div></pre></td></tr></table></figure>
<h3 id="生成新的图像"><a class="markdownIt-Anchor" href="#生成新的图像"></a> 生成新的图像</h3>
<p>Image的new方法用来生成新的图像，下面是他的定义</p>
<blockquote>
<p>Image.new(mode,size) ⇒ image</p>
<p>Image.new(mode, size, color) ⇒ image</p>
</blockquote>
<p>使用给定的变量mode和size生成新的图像。Size是给定的宽/高二元组，这是按照像素数来计算的。对于单通道图像，变量color只给定一个值；对于多通道图像，变量color给定一个元组（每个通道对应一个值）。在版本1.1.4及其之后，用户也可以用颜色的名称，比如给变量color赋值为“red”。如果没有对变量color赋值，图像内容将会被全部赋值为0（图像即为黑色）。如果变量color是空，图像将不会被初始化，即图像的内容全为0。这对向该图像复制或绘制某些内容是有用的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>im= Image.new(<span class="string">"RGB"</span>, (<span class="number">128</span>, <span class="number">128</span>), <span class="string">"red"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>im.show()</div></pre></td></tr></table></figure>
<figure class="image-box">
                <img src="http://omunhj2f1.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-10-30%20%E4%B8%8B%E5%8D%886.47.31.png" alt="屏幕快照 2017-10-30 下午6.47.31.png" title="" class="">
                <p>屏幕快照 2017-10-30 下午6.47.31.png</p>
            </figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>im= Image.new(<span class="string">"RGB"</span>, (<span class="number">128</span>, <span class="number">128</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>im.show()</div></pre></td></tr></table></figure>
<p>图像im为128x128大小的黑色图像，因为变量color不赋值的话，图像内容被设置为0，即黑色。</p>
<h3 id="图像的一些基本操作"><a class="markdownIt-Anchor" href="#图像的一些基本操作"></a> 图像的一些基本操作</h3>
<ol>
<li>输出图片的信息（格式、尺寸以及图像类型）</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding:utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'test.jpg'</span>)</div><div class="line"></div><div class="line"><span class="comment">#输出信息</span></div><div class="line">print(img.format, img.size, img.mode)</div></pre></td></tr></table></figure>
<ol start="2">
<li>显示图片</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding:utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'test.jpg'</span>)</div><div class="line"></div><div class="line">img.show()</div></pre></td></tr></table></figure>
<ol start="3">
<li>旋转图片</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding:utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'test.jpg'</span>)</div><div class="line"><span class="comment">#逆时针旋转45度</span></div><div class="line">rorate1 = img.rotate(<span class="number">45</span>)</div><div class="line">rorate1.show()</div><div class="line"><span class="comment"># 逆时针旋转90</span></div><div class="line">rorate2 = img.transpose(Image.ROTATE_90)</div><div class="line">rorate2.show()</div></pre></td></tr></table></figure>
<p>⚠️：只有选择90度，180度以及270度的时候才能用img.transpose(Image.ROTATE_90)，其他角度用rotate，就像iOS中的tranform方法一样，可以类比一下。</p>
<ol start="4">
<li>缩放图片</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding=utf-8</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'test.jpg'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 缩放图片为50*50</span></div><div class="line">resize1 = img.resize((<span class="number">50</span>, <span class="number">50</span>))</div><div class="line">resize1.show()</div></pre></td></tr></table></figure>
<ol start="5">
<li>生成缩略图</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding:utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'test.jpg'</span>)</div><div class="line"><span class="comment">#生成缩略图</span></div><div class="line">img.thumbnail((<span class="number">128</span>,<span class="number">128</span>))</div><div class="line"></div><div class="line">img.show()</div></pre></td></tr></table></figure>
<p>那么这个时候一定会有人心生疑虑了，这个生成缩略图和缩放图片到底有什么区别呢，根据代码和代码注释, 这两个函数都是对图片进行缩放, 两者的主要区别如下:</p>
<ul>
<li><code>resize()</code>函数会返回一个Image对象, <code>thumbnail()</code>函数返回None</li>
<li><code>resize()</code>修改后的图片在返回的Image中, 而原图片没有被修改; <code>thumbnail()</code>直接对内存中的原图进行了修改, 但是修改需要保存</li>
<li><code>resize()</code>中的size参数直接设定了resize之后图片的规格, 而<code>thumbnail()</code>中的size参数则是设定了x/y上的最大值. 也就是说, 经过<code>resize()</code>处理的图片可能会被拉伸, 而经过<code>thumbnail()</code>处理的图片不会被拉伸</li>
<li><code>thumbnail()</code>函数内部调用了<code>resize()</code>, 可以认为<code>thumbnail()</code>是对<code>resize()</code>的一种封装</li>
</ul>
<ol start="6">
<li>图片灰度化</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding:utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'test.jpg'</span>)</div><div class="line">grey = img .convert(<span class="string">'L'</span>)</div><div class="line">grey.show()</div></pre></td></tr></table></figure>
<ol start="7">
<li>某个像素点的获取和修改</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding:utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'test.jpg'</span>)</div><div class="line"><span class="comment">#打印某个像素点的值</span></div><div class="line">print(img.getpixel((<span class="number">100</span>,<span class="number">100</span>)))</div><div class="line"><span class="comment">#更改像素点的值</span></div><div class="line">img.putpixel((<span class="number">100</span>, <span class="number">100</span>),(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</div></pre></td></tr></table></figure>
<ol start="9">
<li>裁剪图片</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding:utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'test.jpg'</span>)</div><div class="line"></div><div class="line"><span class="comment">#裁剪图片，box为裁剪图片的区域范围</span></div><div class="line">box = (<span class="number">100</span>, <span class="number">100</span>, <span class="number">250</span>, <span class="number">250</span>)</div><div class="line">region = img.crop(box)</div><div class="line">region.show()</div></pre></td></tr></table></figure>
<ol start="10">
<li>粘贴图片</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding:utf-8 -*-</span></div><div class="line"><span class="keyword">from</span> PIl <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'test.jpg'</span>)</div><div class="line"><span class="comment"># 裁剪图片  box为裁剪图片的区域范围</span></div><div class="line">box = (<span class="number">100</span>, <span class="number">100</span>, <span class="number">250</span>, <span class="number">250</span>)</div><div class="line">region = img.crop(box)</div><div class="line">region.show()</div><div class="line"></div><div class="line"><span class="comment"># 逆时针旋转图片180度</span></div><div class="line">region2 = region.transpose(Image.ROTATE_180)</div><div class="line">region2.show()</div><div class="line"></div><div class="line"><span class="comment"># 图片的粘贴</span></div><div class="line">img.paste(region2, box)</div><div class="line">img.show()</div></pre></td></tr></table></figure>
<h3 id="小结"><a class="markdownIt-Anchor" href="#小结"></a> 小结</h3>
<p>从上述的方法中我们可以看到Image模块已然可以满足我们的基本需求，但是如果我们需要有更高的要求，可以使用Matplotlib类库，它具有比PIL更加强大的绘图功能，比如说绘制条状图，饼状图，散点图等。</p>
<p>其实Image中还有许多方法没有讲述，留待补充。</p>
<hr>
<h2 id="0x02-imagedraw模块"><a class="markdownIt-Anchor" href="#0x02-imagedraw模块"></a> 0x02-ImageDraw模块</h2>
<p>ImageDraw模块提供了对图像对象的简单2D绘制，用户可以通过这个模块创建新的图像，为web应用实战产生各类的图形，但其实还有更高级的绘图库<a href="http://effbot.org/zone/aggdraw-index.htm" target="_blank" rel="external">The aggdraw Module</a></p>
<p>ImageDraw绘图接口使用的是和PIL一样的坐标系统，下面就来说一下ImageDraw模块中的函数。</p>
<h3 id="imagedraw中的函数"><a class="markdownIt-Anchor" href="#imagedraw中的函数"></a> ImageDraw中的函数</h3>
<blockquote>
<p>Draw方法：Draw(image) =&gt; Draw instance</p>
</blockquote>
<p>含义：创建一个可以在给定图像上绘图的对象，图像的内容会被修改</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageDraw, Image</div><div class="line">im = Image.open(<span class="string">"test.jpg"</span>)</div><div class="line">draw = ImageDraw.Draw(im)</div><div class="line">draw.line((<span class="number">0</span>, <span class="number">0</span>)+im.size, fill = <span class="number">128</span>)</div><div class="line">draw.line((<span class="number">0</span>,im01.size[<span class="number">1</span>], im.size[<span class="number">0</span>], <span class="number">0</span>), fill = <span class="number">128</span>)</div><div class="line">im.show()</div><div class="line"><span class="keyword">del</span> draw</div></pre></td></tr></table></figure>
<p>在图片上绘制了两条灰色的对角线，如下图：</p>
<figure class="image-box">
                <img src="http://omunhj2f1.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-10-30%20%E4%B8%8B%E5%8D%8810.11.14.png" alt="屏幕快照 2017-10-30 下午10.11.14.png" title="" class="">
                <p>屏幕快照 2017-10-30 下午10.11.14.png</p>
            </figure>
<h3 id="imagedraw模块中的方法"><a class="markdownIt-Anchor" href="#imagedraw模块中的方法"></a> ImageDraw模块中的方法</h3>
<ol>
<li>Arc</li>
</ol>
<p>定义：draw.arc(xy, start, end, options)</p>
<p>含义：在给定的区域内，在开始和结束角度之间绘制一条弧（圆的一部分）。</p>
<p>变量options中fill设置弧的颜色。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image,ImageDraw</div><div class="line">im01 = Image.open(<span class="string">"test.jpg"</span>)</div><div class="line">draw =ImageDraw.Draw(im01)</div><div class="line">draw.arc((<span class="number">0</span>,<span class="number">0</span>,<span class="number">200</span>,<span class="number">200</span>),<span class="number">0</span>, <span class="number">90</span>, fill = (<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>))</div><div class="line">draw.arc((<span class="number">300</span>,<span class="number">300</span>,<span class="number">500</span>,<span class="number">500</span>), <span class="number">0</span>, <span class="number">-90</span>, fill = (<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>))</div><div class="line">draw.arc((<span class="number">200</span>,<span class="number">200</span>,<span class="number">300</span>,<span class="number">300</span>),<span class="number">-90</span>, <span class="number">0</span>, fill = (<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>))</div><div class="line">im01.show()</div><div class="line"><span class="keyword">del</span> draw</div></pre></td></tr></table></figure>
<ol start="2">
<li>Chord</li>
</ol>
<p>定义：draw.chord(xy,start, end, options)</p>
<p>含义：和方法arc()一样，但是使用直线连接起始点。</p>
<p>变量options的outline给定弦轮廓的颜色。Fill给定弦内部的颜色。</p>
<p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageDraw</div><div class="line"></div><div class="line">im01 =Image.open(<span class="string">"test.jpg"</span>)</div><div class="line"></div><div class="line">draw =ImageDraw.Draw(im01)</div><div class="line"></div><div class="line">draw.chord((<span class="number">0</span>,<span class="number">0</span>,<span class="number">200</span>,<span class="number">200</span>),<span class="number">0</span>, <span class="number">90</span>, fill = (<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>))</div><div class="line"></div><div class="line">draw.chord((<span class="number">300</span>,<span class="number">300</span>,<span class="number">500</span>,<span class="number">500</span>), <span class="number">0</span>, <span class="number">-90</span>, fill = (<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>))</div><div class="line"></div><div class="line">draw.chord((<span class="number">200</span>,<span class="number">200</span>,<span class="number">300</span>,<span class="number">300</span>), <span class="number">-90</span>, <span class="number">0</span>, fill = (<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>))</div><div class="line"></div><div class="line">im01.show()</div></pre></td></tr></table></figure>
<ol start="3">
<li>Point</li>
</ol>
<p>定义：draw.point(xy,options)</p>
<p>含义：在给定的坐标点上画一些点。</p>
<p>坐标列表是包含2元组[(x,y),…]或者数字[x,y,…]的任何序列对象。</p>
<p>变量options的fill给定点的颜色。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageDraw</div><div class="line"></div><div class="line">im01 = Image.open(<span class="string">"test.jpg"</span>)</div><div class="line"></div><div class="line">draw = ImageDraw.Draw(im01)</div><div class="line"></div><div class="line">draw.point([(<span class="number">0</span>,<span class="number">0</span>),(<span class="number">100</span>,<span class="number">150</span>), (<span class="number">110</span>, <span class="number">50</span>)], fill = (<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>))</div><div class="line"></div><div class="line">draw.point([<span class="number">0</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">110</span>, <span class="number">210</span>, <span class="number">150</span>], fill = (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>))</div><div class="line"></div><div class="line">im01.show()</div></pre></td></tr></table></figure>
<p>还有一些诸如绘制图形，折线之类的方法就不多赘述了，参考<a href="http://blog.csdn.net/icamera0/article/details/50747084" target="_blank" rel="external">博客</a>，接下来我们利用学的两个模块来分析一个脚本。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">from</span> ast <span class="keyword">import</span> literal_eval <span class="keyword">as</span> make_tuple</div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageDraw</div><div class="line">f = open(<span class="string">'p&amp;s.txt'</span>, <span class="string">'r'</span>)</div><div class="line">points = [make_tuple(line) <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines()]</div><div class="line">f.close()</div><div class="line">image = Image.new(<span class="string">'RGB'</span>, (<span class="number">270</span>, <span class="number">270</span>), <span class="string">'#ffffff'</span>)</div><div class="line">draw = ImageDraw.Draw(image)</div><div class="line"><span class="keyword">for</span> point <span class="keyword">in</span> points:</div><div class="line">	draw.point(point, fill=<span class="string">"#000000"</span>)</div><div class="line">image.save(<span class="string">'qrcode.png'</span>)</div></pre></td></tr></table></figure>
<p>这个代码中打开txt文件，将其中的坐标点画成黑色，使用到了我们的ImageDraw，那么我们可以尝试着去使用只用Image改写这个脚本来验证今天学习的成果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#! /usr/bin/env python3</span></div><div class="line"><span class="keyword">from</span> ast <span class="keyword">import</span> literal_eval <span class="keyword">as</span> make_tuple</div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"></div><div class="line">f = open(<span class="string">'p&amp;s.txt'</span>, <span class="string">'r'</span>)</div><div class="line">points = [make_tuple(line) <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines()]</div><div class="line">f.close()</div><div class="line">image = Image.new(<span class="string">'RGB'</span>, (<span class="number">270</span>, <span class="number">270</span>), <span class="string">'#ffffff'</span>)</div><div class="line"><span class="keyword">for</span> point <span class="keyword">in</span> points:</div><div class="line"> 	image.putpixel((point[<span class="number">0</span>]<span class="number">-1</span>, point[<span class="number">1</span>]<span class="number">-1</span>), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</div><div class="line">image.save(<span class="string">"qrcode.png"</span>)</div></pre></td></tr></table></figure>
<p>这样就完成了，那么PIL学习的第一天就先告一段落吧！</p>

        </div>
        
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最後更新時間：<time datetime="2017-10-30T15:26:06.000Z" itemprop="dateUpdated">2017-10-30 23:26:06</time>
</span><br>


        
        转载注明出处，原文地址：<a href="/2017/10/30/PIL学习-一/" target="_blank" rel="external">http://yoursite.com/2017/10/30/PIL学习-一/</a>
        
    </div>
    <footer>
        <a href="http://yoursite.com">
            <img src="/img/miao_icon.jpg" alt="Peter pan">
            Peter pan
        </a>
    </footer>
</blockquote>

        
            <div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>

            
        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CTF/">CTF</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://yoursite.com/2017/10/30/PIL学习-一/&title=《PIL学习(一)》 — Peterpan's Blog&pic=http://yoursite.com/img/miao_icon.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/2017/10/30/PIL学习-一/&title=《PIL学习(一)》 — Peterpan's Blog&source=突破script kid的境界了～离解锁脚本大师的成就又近一步" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            
    <div id="comment"></div>


        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2017/10/31/Python-Review/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Python3-Review</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/10/30/CTF-图像学基础/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">CTF-图像学基础</h4>
      </a>
    </div>
  
</nav>


</article>

    <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        我们一起来让这个世界有趣一点
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wc.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wc.png" data-alipay="/img/123.png">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>

    

</div>

    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x00-前言pil介绍和安装"><span class="post-toc-number">1.</span> <span class="post-toc-text"> 0x00-前言&PIL介绍和安装</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x01-image模块"><span class="post-toc-number">2.</span> <span class="post-toc-text"> 0x01-Image模块</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#读取和存储操作"><span class="post-toc-number">2.1.</span> <span class="post-toc-text"> 读取和存储操作</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#生成新的图像"><span class="post-toc-number">2.2.</span> <span class="post-toc-text"> 生成新的图像</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#图像的一些基本操作"><span class="post-toc-number">2.3.</span> <span class="post-toc-text"> 图像的一些基本操作</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#小结"><span class="post-toc-number">2.4.</span> <span class="post-toc-text"> 小结</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x02-imagedraw模块"><span class="post-toc-number">3.</span> <span class="post-toc-text"> 0x02-ImageDraw模块</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#imagedraw中的函数"><span class="post-toc-number">3.1.</span> <span class="post-toc-text"> ImageDraw中的函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#imagedraw模块中的方法"><span class="post-toc-number">3.2.</span> <span class="post-toc-text"> ImageDraw模块中的方法</span></a></li></ol></li></ol>
        </nav>
    </aside>
    
        <footer class="footer">
    
    <div class="top">
        
        
            <p>
    <span>Links：</span>
    
    <span class="blogroll-item">
        <a href="https://www.github.com/Peterpan0927" target="_blank">github</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://bbs.iosre.com" target="_blank">iOSRE</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.coding.net" target="_blank">coding</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
        <p>
            <span>
                Peter pan &copy; 2017 - 2018
            </span>
        		
           	
            
            
            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            
            
            
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://yoursite.com/2017/10/30/PIL学习-一/&title=《PIL学习(一)》 — Peterpan's Blog&pic=http://yoursite.com/img/miao_icon.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/2017/10/30/PIL学习-一/&title=《PIL学习(一)》 — Peterpan's Blog&source=突破script kid的境界了～离解锁脚本大师的成就又近一步" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACOElEQVR42u3aQW7DMAwFUd//0i7QVYHU8nxSLSBptAoSx9bLgqFIXhde9/f6fOfn+rzyfljjp4yvaS0ZMmQsy7iHi2z6Cfn0E5A98L3JkCHjHMY4yI5D4Tjskjun95EhQ4aMNGiS5G98DUk0ZciQISNlkA2Rd2pppQwZMs5kkENsLYEb34cni9PO4jJkyFiQkTYG/vP1H/Y3ZMiQsQjjDlcaEPvtAXR/GTJkbM2YVuoqbTT97kuLQoYMGYcxgjAXjlzwa+JkUYYMGZsy0o3yhiUvt6X4X17LkCHjGAYptKWbq/00cbtChgwZWzPSg2V/LIMnf/GzZMiQcQCDnw1r4ZLcPx07kyFDxjmMWuGMh9p0WzxVlSFDxgmM2ub6m+DPRZ/KkCHjAEZt052ksNMGQFVDGTJkbMSoHVxrD+5/9+JLhgwZWzNq1JfRUvBprYXQ4smQIWMpRlre4iMU6ehGbcmQIeMcBi+c8VGJTuKYDmHIkCFjb0btAFkbvOCZafEaGTJkbMdIg2y/iNYP8S/9DRkyZBzASBNHHnY7pb044MqQIWMjRloU48lf+mD+3aC1KUOGjC0YtRL8rDJcv1RX7C3IkCFjKUYtReskiKSoR5BFjAwZMpZl8CBLjpQkyPLWwuROrAwZMhZn1JqUnaGK2j/Ay1iYDBkyjmeQkMqremkgRqmhDBkyZIRnX35ATdkTAq4MGTIWZPBDbGcAopYUooOxDBkytmakjYFWUawdoFsDZzJkyFiP8QWT0jziJaerKAAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="//cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.0.7"></script>

<script type="text/javascript" src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.0.7"></script>
<script type="text/javascript" src="/js/blog.js?v=1.0.7"></script>

<!-- third-party -->



<script type="text/javascript" src="/js/plugins/local_search.js?v=1.0.7"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



    
        <script type="text/javascript" src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script type="text/javascript" src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script type="text/javascript" src="/js/plugins/valine.js?v=1.0.7"></script>
    



<script type="text/javascript" src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
<script type="text/javascript" src="/js/plugins/leancloud_visitors.js?v=1.0.7"></script>



    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>




    <script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = '思维失去连接...';
                clearTimeout(titleTime);
            } else {
                document.title = '(つェ⊂)咦!又好了!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>


    
</body>
</html>
