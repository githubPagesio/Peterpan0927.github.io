<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="how to reach the steins gate?">
    

    <!--Author-->
    
        <meta name="author" content="Peter pan">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="OC特有语法"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="how to reach the steins gate?" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Peterpan&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>OC特有语法 - Peterpan&#39;s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2017/06/21/OC特有语法/">
                OC特有语法
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-06-21</span>
            
            
            
                <span class="category">
                    <a href="/categories/OC特有语法/">OC特有语法</a>
                </span>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <p>OC特有语法</p>
<a id="more"></a>
<h2 id="子类在内存中的存储和方法调用过程"><a class="markdownIt-Anchor" href="#子类在内存中的存储和方法调用过程"></a> 子类在内存中的存储和方法调用过程</h2>
<p>1.子类对象中有自己的属性和所有父类的属性</p>
<p><img src="http://omunhj2f1.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-06-17%20%E4%B8%8B%E5%8D%8811.23.35.png" alt=""></p>
<p>2.除去NSObject类之外代码段中的每一个类都有一个isa指针指向它的父类，在继承中，代码段中也是通过这样的指针来调用父类的方法和属性。</p>
<p>在调用方法的时候，根据isa指针一层一层的往上寻找，一直到NSObject为止，如果NSObject也没有就会报错。</p>
<hr>
<h2 id="结构体和类的不同点"><a class="markdownIt-Anchor" href="#结构体和类的不同点"></a> 结构体和类的不同点</h2>
<ul>
<li>结构体只能封装数据，而类不仅可以封装数据还可以封装行为</li>
<li>结构体变量分配在栈中（如果是一个局部变量的情况下）而对象分配在堆中</li>
</ul>
<p>​        栈的特点：空间相对较小，但是存储在栈中的数据访问效率更高一些</p>
<p>​	堆的特点：空间相对较大，但是存储在堆中的数据访问效率更低一些</p>
<ul>
<li>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//赋值对比</div><div class="line">//值赋值</div><div class="line">Student s1 = &#123;&quot;jack&quot;,19&#125;;</div><div class="line">Student s2 = s1;</div><div class="line">//地址赋值</div><div class="line">Person *p1 = [Person new];</div><div class="line">Person *p2 = p1;</div></pre></td></tr></table></figure>
<p>​</p>
<hr>
<p>​</p>
</li>
</ul>
<h2 id="类的存储"><a class="markdownIt-Anchor" href="#类的存储"></a> 类的存储</h2>
<ul>
<li>
<p>类在第一次被访问的时候，类就会被加载到代码段存储，被称为类加载。</p>
</li>
<li>
<p>类在被加载到代码段之后，除非程序结束不然不会被回收</p>
</li>
<li>
<p>类存储在代码段中的形式：<img src="http://omunhj2f1.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-06-18%20%E4%B8%8B%E5%8D%8812.34.56.png" alt=""></p>
<p>1.先在代码段中创建一个Class对象，Class是Foundation框架中的一个类，</p>
<p>这个Class对象就是用来存储类信息。</p>
<p>2.将类的信息存储在这个Class对象当中</p>
<blockquote>
<p>这个Class对象至少有三个属性</p>
<p>类名：存储这个类的名称</p>
<p>属性：存储这个类具有哪些属性</p>
<p>方法：存储这个类具有哪些方法</p>
</blockquote>
<p>所以存储类的类对象也有一个叫做isa指针的属性，这个指针指向存储父类的对象。</p>
</li>
</ul>
<hr>
<h2 id="类对象的使用"><a class="markdownIt-Anchor" href="#类对象的使用"></a> 类对象的使用</h2>
<p>1.调用类的类方法 class 就可以得到存储类的类对象地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//声明Class指针的时候不需要加* ，因为在typedef的时候已经加上了*</div><div class="line">Class c1 = [Person class];</div><div class="line">NSLog(@&quot;%p&quot;,c1);</div></pre></td></tr></table></figure>
<p>2.调用对象的对象方法class就可以得到存储这个对象所属的类的Class对象的地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Person *p1 = [Person new];</div><div class="line">Class c2 = [p1 class];</div><div class="line">NSLog(@&quot;%p&quot;,c2);</div></pre></td></tr></table></figure>
<p>3.对象中的isa指针的值其实就是代码段中存储类的类对象的地址</p>
<p>4.类对象的使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Class c1 = [Person class];</div><div class="line">//此时c1就是指向了Person这个类,可以直接调用类方法。</div><div class="line">[c1 sayHi];</div><div class="line">//可以使用使用类对象来调用new方法，创建存储在类对象中的类的对象</div><div class="line">c1 *p2 = [c1 new];</div><div class="line">//类对象不能用来调用实例方法，但是可以用来调用类方法</div></pre></td></tr></table></figure>
<hr>
<h2 id="方法本质是sel消息"><a class="markdownIt-Anchor" href="#方法本质是sel消息"></a> 方法本质是SEL消息</h2>
<p>SEL的全称是叫做selector 选择器，是一个数据类型，所以要在内存中申请空间存储数据。</p>
<p>SEL其实是一个类，SEL对象是用来存储方法的</p>
<p>由此可知方法在类对象中的存储方式：</p>
<p>1.创建一个SEL对象</p>
<p>2.方法存储在SEL对象之中</p>
<p>3.SEL对象再作为Class对象的一个属性</p>
<p><strong>拿到存储方法的SEL对象</strong></p>
<ul>
<li>
<p>因为SEL是个typedef类型，在自定义的时候已经加*了，所以我们在声明SEL指针的时候，不需要加 *。</p>
</li>
<li>
<p>取到存储方法的SEL 对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SEL s1 = @selector(方法名);</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>调用方法的本质</strong></p>
<ul>
<li>先拿到存储方法的对象，也就是拿到存储方法的SEL数据，SEL消息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//向p1对象发送一条SEL消息</div><div class="line">[p1 sayHi];</div></pre></td></tr></table></figure>
<ul>
<li>将这个SEL消息发送给对象</li>
<li>这个时候对象接收到消息之后就知道要调用方法</li>
<li>根据对象的isa指针找到存储类的类对象</li>
<li>找到这个类对象之后，在这个类对象中去搜寻是否有和传入的SEL数据相匹配的，如果有就执行，没有就再找父类，直到NSObject为止。</li>
</ul>
<p><img src="http://omunhj2f1.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-06-19%20%E4%B8%8A%E5%8D%8810.28.46.png" alt=""></p>
<ul>
<li>手动向对象发送SEL消息：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Person p1 = [Person new];</div><div class="line">SEL s1 = @selector(sayHi);</div><div class="line">[p1 performSelector:s1];</div></pre></td></tr></table></figure>
<hr>
<h2 id="点语法"><a class="markdownIt-Anchor" href="#点语法"></a> 点语法</h2>
<p>点语法的原理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">p1.age = 18;</div><div class="line">//这句话的本质不是直接把18赋值给p1对象的_age属性</div></pre></td></tr></table></figure>
<ul>
<li>当使用点语法赋值的时候，编译器会将点语法转换为调用setter方法的代码：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//编译器会将下面这句代码转换为它的setter方法</div><div class="line">p1.age = 10;</div><div class="line">[p1 setAge:10];</div></pre></td></tr></table></figure>
<ul>
<li>当使用点语法取值的时候 ，编译器会将点语法转换为调用getter方法的代码：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//编译器会将下面这句代码转换为它的getter方法</div><div class="line">NSString *name = p1.name;</div><div class="line">NSString *name = [p1 name];</div></pre></td></tr></table></figure>
<p>⚠️：在getter、setter方法中慎用点语法，因为有可能会造成无限递归 而程序崩溃:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (void)setAge:(int)age&#123;</div><div class="line">  self.age = age;</div><div class="line">  //[self setAge:age];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="property和synthesize"><a class="markdownIt-Anchor" href="#property和synthesize"></a> @property和@synthesize</h2>
<p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">@interface Person: NSObject</div><div class="line">  &#123;</div><div class="line">    int _age;</div><div class="line">  &#125;</div><div class="line">@property int age;</div><div class="line">@end</div><div class="line">----</div><div class="line">@implementation Person</div><div class="line">  </div><div class="line">@synthesize age;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<p>@property只是对属性的getter和setter方法做了一个声明，还要在.m文件中通过@synthesize来实现。</p>
<p><strong>@synthesize的作用</strong></p>
<p>1.生成一个真私有属性方法，属性的类型名字都和它对应的@property一致。</p>
<p>2.自动生成setter方法，将参数赋给那个自动生成的私有属性</p>
<p>3.自动生成getter方法，将生成的属性的值返回</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">//@synthesize做的事情等价于下面的代码</div><div class="line">@implementation Person</div><div class="line">  &#123;</div><div class="line">    int age;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">-(void)setAge&#123;</div><div class="line">  self-&gt;age = age;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(int)age&#123;</div><div class="line">  return self-&gt;age;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>这就意味着之前声明的私有属性没有任何的作用了，可以去掉，现在是直接在@property中声明属性，然后在@synthesize中生成getter和setter方法。</p>
<p><strong>但是从Xcode4.4之后</strong>，对于@property做了增强，只需要写一个@property，编译器就会自动的生成私有属性和getter和setter的声明和实现。</p>
<p>所以升级之后下面的代码含义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@property NSString *name;</div><div class="line">//自动生成1个私有属性，类型和名称和@property一致，属性的名称前面自动加一个下划线。</div><div class="line">//自动生成这个这个属性的getter和setter方法的声明和实现</div></pre></td></tr></table></figure>
<p><strong>使用注意</strong>：</p>
<ul>
<li>@property类型一定要和属性的类型一致，名字也要一致，只是去掉下划线</li>
<li>@property生成的方法没有做任何的逻辑验证，都是直接赋值或者直接返回，所以我们可以通过重写setter方法来自定义验证逻辑。</li>
<li>重写setter方法的时候会自动生成getter方法，重写getter方法的时候会自动重写getter方法，如果两个同时重写将不会自动生成私有属性</li>
<li>@property生成的是私有属性，父类的@property属性可以被子类继承，但是在子类的内部无法被访问，只能通过getter和setter方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//在子类中访问父类的属性</div><div class="line">- (void)test&#123;</div><div class="line">  [super setName:@&quot;jack&quot;];</div><div class="line">  //或者使用</div><div class="line">  self.name = @&quot;jack&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="静态类型和动态类型"><a class="markdownIt-Anchor" href="#静态类型和动态类型"></a> 静态类型和动态类型</h2>
<p>OC是一门弱语言</p>
<p>编译器在编译的时候，检查没有那么严格</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> num = <span class="number">12.12</span>;</div></pre></td></tr></table></figure>
<p>但是在运行的时候会报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSString *str = [Pig new];</div><div class="line">//实际上没有length这个方法，但是编译不会出现问题</div><div class="line">[str length];</div></pre></td></tr></table></figure>
<p>静态类型和动态类型：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//一个指针指向的对象是本类的对象</div><div class="line">Animal *a1 = [Animal new];</div><div class="line">//动态类型指的是编译的时候不确定他的实际类型，只有在运行的时候才会真实确定他的类型</div><div class="line">NSString *arr = @&quot;123456&quot;;</div><div class="line">UIButton *button = (UIButton *)arr;</div><div class="line">//只有在程序运行的时候才会真实确定变量的真实类型。</div><div class="line">NSLog(@&quot;%@&quot;,button);</div></pre></td></tr></table></figure>
<p><strong>编译检查</strong></p>
<p>编译器的名称叫做LLVM</p>
<p>编译器在编译的时候，能不能通过指针去调用指针指向对象的方法</p>
<p>判断原则：判断这个指针所属的类型中有没有此方法，如果有就编译通过，如果这个类没有就编译报错</p>
<p>这个叫做编译检查，在编译的时候，能不能通过调用对象的方法主要是看指针的类型。</p>
<p>我们可以将指针的类型做转换，来达到骗过编译器的目的</p>
<p><strong>运行检查</strong></p>
<p>编译检查只是骗过了编译器，但是在运行的时候还会进行一次检查。</p>
<p>如果对象中真的有这个方法才会执行，否则报错</p>
<p><strong>LSP</strong></p>
<p>父类指针指向子类对象。</p>
<p>实际上任意的指针可以执行任意的对象，编译器是不会报错的。</p>
<p>当一个子类指针执行父类对象的时候，编译器运行通过子类指针去调用子类独有的方法，但是在运行的时候会出问题。</p>
<hr>
<h2 id="nsobject和id指针"><a class="markdownIt-Anchor" href="#nsobject和id指针"></a> NSObject和id指针</h2>
<p><strong>1.NSObject</strong></p>
<p>是所有类的基类，根据LSP，NSObject可以指向任意的OC对象，所以NSObject指针是一个万能指针</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//声明一个NSObject指针，然后让指针的类型改变成为Person类型的</div><div class="line">NSObject *obj = [Person new];</div><div class="line">//需要做一个类型转换，不然无法通过编译检查</div><div class="line">[(Person *)obj sayHi];</div></pre></td></tr></table></figure>
<p><strong>2.id指针</strong></p>
<p>万能指针，可以指向任何的OC 对象</p>
<p>1.id是一个typedef类型，在自定义的时候已经加上了*</p>
<p>2.id指针是一个万能指针，任何OC对象都可以指</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">id *id1 = [Person new];</div><div class="line">[id1 sayHi];</div></pre></td></tr></table></figure>
<p><strong>3.二者的异同</strong></p>
<p>同：万能指针 都可以执行任意的OC对象</p>
<p>异：如果指针是id类型的，在编译检查的时候直接通过</p>
<p>⚠️：id不能使用点语法，只能调用方法，不然编译器会直接报错，如果要使用万能指针，就选择使用id，方便很多。</p>
<p><strong>4.父类创建一个类方法返回父类对象</strong></p>
<ul>
<li>如果返回值写为父类类型，那么子类来调用这个方法得到的就是父类指针，解决的方式就是把返回值改成id类型。</li>
<li>方法内部创建的对象不能写死。</li>
<li>如果方法的返回值是id，问题就是任意指针都可以接受这个方法的返回值，编译器连警告都没有，如果方法的返回值是instancetype，那么代表的是当前这个类的对象。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">+ (instancetype)person&#123;</div><div class="line">  return [self new];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="动态类型检测"><a class="markdownIt-Anchor" href="#动态类型检测"></a> 动态类型检测</h2>
<p>我们写的程序就算是编译通过了，不意味着可以完美执行，所以我们希望可以判断一下对象中是否有这个方法，如果有再执行。</p>
<p>1.判断指针指向的对象是否有这个方法可以执行（只能判断对象方法）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Person *p1 = [Person new];</div><div class="line">BOOL b1 = [p1 respondsToSelector:@selector(length)];</div><div class="line">if(b1)&#123;</div><div class="line">  [p1 sayHi];</div><div class="line">&#125;else&#123;</div><div class="line">  NSLog(@&quot;NO。。。。。&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2.判断指定的对象是不是指定的类或者指定的类的子类的实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Student *s1 = [Student new];</div><div class="line">BOOL b1 = [s1 isKindOfClass:[Person class]];</div></pre></td></tr></table></figure>
<p>3.只能判断本类不包括子类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">BOOL b1 = [s1 isMemberOfClass:[Person class]];</div></pre></td></tr></table></figure>
<p>4.判断一个类是否是另一个类的子类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[Student isSubclassOfClass:[Person class]];</div></pre></td></tr></table></figure>
<p>5.判断指定的类中有没有对应的类方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[Student instancetypeRespondToSelector:@selector(sayHi)];</div></pre></td></tr></table></figure>
<hr>
<h2 id="构造方法概述"><a class="markdownIt-Anchor" href="#构造方法概述"></a> 构造方法概述</h2>
<p><strong>new方法</strong>：</p>
<p>new方法的内部，其实是先调用alloc方法，再调用的init方法。</p>
<p>alloc 是一个类方法，那一个类的调用的这个方法，就创建哪一个类的对象，并将其返回</p>
<p>init方法是一个对象方法，用来初始化对象。</p>
<p>虽然没有初始化的对象有时候也可以用来使用，但是千万不要这么做，使用一个未初始化的对象很危险，如果有一个属性是指针，就会指向了未知的内存空间。</p>
<p><strong>init方法</strong>：</p>
<p>作用是为对象的属性赋初始值，这个init方法我们叫做构造方法</p>
<p>所以，就算我们没有赋值，属性也是有默认值的。</p>
<p>如果想要在初始化的时候给属性赋上自定义的值，就可以重写init构造方法。</p>
<p>重写规范：</p>
<ul>
<li>必须要先调用父类的init方法，然后将方法的返回值赋值给self</li>
<li>调用init方法初始化对象可能会失败，失败则会返回nil</li>
<li>判断父类是否初始化成功，成功则初始化当前对象的属性</li>
<li>最后返回self的值</li>
</ul>
<p><strong>Reason</strong>:</p>
<ul>
<li>为什么要调用父类的init方法？</li>
</ul>
<p>因为父类的init方法会初始化父类的属性，所以必须要保证当前对象的父类属性也被初始化</p>
<ul>
<li>为什么要赋值给self?</li>
</ul>
<p>因为，调用父类的init方法，实际上返回的就是当前对象，但是我们要判断是否初始化成功。</p>
<p><strong>一些问题</strong>：</p>
<p>重写了init方法之后，每一次创建出来的对象的属性都是一样的。希望可以由创建对象的人来指定，而不是写死在init方法之中。同时我们需要遵循以下规范：</p>
<ul>
<li>自定义构造方法的返回值必须是instancetype</li>
<li>自定义的构造方法的名称必须以initWith开头</li>
<li>方法的实现和init的要求一样</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (instancetype)initWithAge:(int)age&#123;</div><div class="line">  if(self = [super init])&#123;</div><div class="line">    self.age = age;</div><div class="line">  &#125;</div><div class="line">  return self;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/iOS开发/">#iOS开发</a>
        </div>
    

    <!-- Comments -->
    

</div>
        </section>

    </div>
</div>


</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    Hacking to the gate
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2018/09/10/empty-list分析/">empty_list分析</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2018/08/29/ZipperDown漏洞的新一轮分析/">ZipperDown漏洞的新一轮分析</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2018/08/06/绕过SMAP提权-Mac移植/">绕过SMAP提权(Mac移植)</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2018/07/29/通过堆风水绕过内核保护提权/">通过堆风水绕过内核保护提权</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/代理-图片轮播器-模块化/">代理 图片轮播器 模块化</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Intel/">Intel</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/sumup/">sumup</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/ARC自动回收机制/">ARC自动回收机制</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/peterpan0927">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/peterpan980927">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://plus.google.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-google-plus"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>